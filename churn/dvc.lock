schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      md5: 73fba4fd85b6dbaf95c9d5e3836d3926
      size: 684860
    - path: stages/data_split.py
      md5: 795e8c16dcd8f5b27b85f8d7cc4f7b95
      size: 1787
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols: []
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      md5: 3ca9da2257349324d5eb8bf012fb744f
      size: 180939
    - path: data/X_train.pkl
      md5: 8b2540b34d70405dd5034b2d0586f2a3
      size: 405948
    - path: data/X_val.pkl
      md5: bb910e8ae7e680c6c08364a76675f720
      size: 135939
    - path: data/y_test.pkl
      md5: 43cae56f9c05f8b0498e59c4d48c73f5
      size: 60613
    - path: data/y_train.pkl
      md5: cf0b508517894959cd8f089a9d757175
      size: 135622
    - path: data/y_val.pkl
      md5: 6e7080754981c18d4ab11fd52f4166c5
      size: 45613
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 8b2540b34d70405dd5034b2d0586f2a3
      size: 405948
    - path: data/X_val.pkl
      md5: bb910e8ae7e680c6c08364a76675f720
      size: 135939
    - path: data/y_train.pkl
      md5: cf0b508517894959cd8f089a9d757175
      size: 135622
    - path: data/y_val.pkl
      md5: 6e7080754981c18d4ab11fd52f4166c5
      size: 45613
    - path: stages/train.py
      md5: 959e98c0cc5e1161d116a50a158021b3
      size: 1768
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols: []
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        train:
          models_dir: models
          model_fname: model.joblib
          lightgbm:
            scale_pos_weight: 2
            n_estimators: 60
            max_depth: 10
    outs:
    - path: dvclive/scalars
      md5: 005fafb6980807cf4eb7d54e2815b19d.dir
      size: 2222
      nfiles: 1
    - path: models/model.joblib
      md5: d1724eeafbdc618d4b877e332666728a
      size: 204074
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: 3ca9da2257349324d5eb8bf012fb744f
      size: 180939
    - path: data/y_test.pkl
      md5: 43cae56f9c05f8b0498e59c4d48c73f5
      size: 60613
    - path: models/model.joblib
      md5: d1724eeafbdc618d4b877e332666728a
      size: 204074
    - path: stages/eval.py
      md5: 282db7ac9083a12df5634e44fb7a66c6
      size: 2012
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols: []
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.25
        train:
          models_dir: models
          model_fname: model.joblib
          lightgbm:
            scale_pos_weight: 2
            n_estimators: 60
            max_depth: 10
    outs:
    - path: eval_plots/cm.png
      md5: c0ec6e0ac1e52565dd8743de28b69a3d
      size: 19776
    - path: eval_plots/plots/roc.json
      md5: aedcab3069f6eb7e4597725a2d81f702
      size: 78307
    - path: metrics.json
      md5: af9ed27bb9ada9611807e8151e5613df
      size: 67
